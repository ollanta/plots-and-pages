var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function a(t){t.forEach(n)}function r(t){return"function"==typeof t}function o(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function i(t,n,e,a){return t[1]&&a?function(t,n){for(const e in n)t[e]=n[e];return t}(e.ctx.slice(),t[1](a(n))):e.ctx}function s(t,n,e,a,r,o,s){const c=function(t,n,e,a){if(t[2]&&a){const r=t[2](a(e));if(void 0===n.dirty)return r;if("object"==typeof r){const t=[],e=Math.max(n.dirty.length,r.length);for(let a=0;a<e;a+=1)t[a]=n.dirty[a]|r[a];return t}return n.dirty|r}return n.dirty}(n,a,r,o);if(c){const r=i(n,e,a,s);t.p(r,c)}}function c(t,n){t.appendChild(n)}function u(t,n,e){t.insertBefore(n,e||null)}function l(t){t.parentNode.removeChild(t)}function f(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function $(){return d(" ")}function p(t,n,e,a){return t.addEventListener(n,e,a),()=>t.removeEventListener(n,e,a)}function m(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function h(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function g(t,n){t.value=null==n?"":n}function y(t,n,e,a){t.style.setProperty(n,e,a?"important":"")}let x;function b(t){x=t}const v=[],k=[],w=[],_=[],A=Promise.resolve();let E=!1;function T(t){w.push(t)}function L(t){_.push(t)}let O=!1;const j=new Set;function M(){if(!O){O=!0;do{for(let t=0;t<v.length;t+=1){const n=v[t];b(n),R(n.$$)}for(b(null),v.length=0;k.length;)k.pop()();for(let t=0;t<w.length;t+=1){const n=w[t];j.has(n)||(j.add(n),n())}w.length=0}while(v.length);for(;_.length;)_.pop()();E=!1,O=!1,j.clear()}}function R(t){if(null!==t.fragment){t.update(),a(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(T)}}const P=new Set;let C;function N(t,n){t&&t.i&&(P.delete(t),t.i(n))}function S(t,n,e,a){if(t&&t.o){if(P.has(t))return;P.add(t),C.c.push((()=>{P.delete(t),a&&(e&&t.d(1),a())})),t.o(n)}}function z(t,n){S(t,1,1,(()=>{n.delete(t.key)}))}function q(t,n,e){const a=t.$$.props[n];void 0!==a&&(t.$$.bound[a]=e,e(t.$$.ctx[a]))}function B(t){t&&t.c()}function D(t,e,o){const{fragment:i,on_mount:s,on_destroy:c,after_update:u}=t.$$;i&&i.m(e,o),T((()=>{const e=s.map(n).filter(r);c?c.push(...e):a(e),t.$$.on_mount=[]})),u.forEach(T)}function V(t,n){const e=t.$$;null!==e.fragment&&(a(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function Y(t,n){-1===t.$$.dirty[0]&&(v.push(t),E||(E=!0,A.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function F(n,r,o,i,s,c,u=[-1]){const f=x;b(n);const d=n.$$={fragment:null,ctx:null,props:c,update:t,not_equal:s,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:e(),dirty:u,skip_bound:!1};let $=!1;if(d.ctx=o?o(n,r.props||{},((t,e,...a)=>{const r=a.length?a[0]:e;return d.ctx&&s(d.ctx[t],d.ctx[t]=r)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](r),$&&Y(n,t)),e})):[],d.update(),$=!0,a(d.before_update),d.fragment=!!i&&i(d.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);d.fragment&&d.fragment.l(t),t.forEach(l)}else d.fragment&&d.fragment.c();r.intro&&N(n.$$.fragment),D(n,r.target,r.anchor),M()}b(f)}class G{$destroy(){V(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function H(n){let e,a,r,o,i,s;return{c(){e=f("script"),r=$(),o=f("div"),e.src!==(a="https://cdn.plot.ly/plotly-latest.min.js")&&m(e,"src","https://cdn.plot.ly/plotly-latest.min.js"),m(o,"id","plotly-graph")},m(t,a){c(document.head,e),u(t,r,a),u(t,o,a),i||(s=p(e,"load",n[0]),i=!0)},p:t,i:t,o:t,d(t){l(e),t&&l(r),t&&l(o),i=!1,s()}}}function I(t,n,e){let{data:a}=n,{layout:r}=n;var o;return t.$$set=t=>{"data"in t&&e(1,a=t.data),"layout"in t&&e(2,r=t.layout)},t.$$.update=()=>{14&t.$$.dirty&&o&&Plotly.react("plotly-graph",a,r)},[function(){Plotly.newPlot("plotly-graph",a,r),e(3,o=!0)},a,r,o]}class J extends G{constructor(t){super(),F(this,t,I,H,o,{data:1,layout:2})}}function K(t){let n,e;return n=new J({props:{data:t[0],layout:t[1]}}),{c(){B(n.$$.fragment)},m(t,a){D(n,t,a),e=!0},p(t,[e]){const a={};1&e&&(a.data=t[0]),2&e&&(a.layout=t[1]),n.$set(a)},i(t){e||(N(n.$$.fragment,t),e=!0)},o(t){S(n.$$.fragment,t),e=!1},d(t){V(n,t)}}}function Q(t){var n=["blue","red","green"],e={};return t.forEach((function(t){e[t.name]||(e[t.name]=n.pop()),t.color=e[t.name]})),{rects:t.map((function(t){return{type:"rect",xref:"x",yref:"paper",x0:t.start,x1:t.end,y0:0,y1:.1,line:{width:0},fillcolor:t.color,opacity:.3}})),colorMap:e}}function U(t,n,e){let{LeftAxis:a}=n,{RightAxis:r}=n,{Observations:o}=n,{Treatments:i}=n;var s,c,u=a.tables[0];return t.$$set=t=>{"LeftAxis"in t&&e(2,a=t.LeftAxis),"RightAxis"in t&&e(3,r=t.RightAxis),"Observations"in t&&e(4,o=t.Observations),"Treatments"in t&&e(5,i=t.Treatments)},t.$$.update=()=>{if(44&t.$$.dirty){r.tables.forEach((t=>t.yaxis="y2"));var n=Q(i).colorMap,l=Object.keys(n).map((function(t){return{x:u.x,y:u.y,showlegend:!0,visible:"legendonly",opacity:.8,mode:"markers",marker:{color:n[t],symbol:"square",size:15},name:t}}));e(0,s=[...a.tables,...r.tables,{x:u.x,y:u.y,xaxis:"x2",showlegend:!1,opacity:0}].concat(l))}if(60&t.$$.dirty){var f={lines:($=o).map((function(t){return{type:"line",xref:"x",yref:"paper",x0:t.time,x1:t.time,y0:0,y1:1,line:{width:2,dash:"dash"}}})),times:$.map((function(t){return t.time})),names:$.map((function(t){return t.name}))},d=Q(i).rects;e(1,c={xaxis:{side:"top",tickformat:"%Y-%m-%d"},xaxis2:{side:"bottom",overlaying:"x",matches:"x",tickvals:f.times,ticktext:f.names,showgrid:!1,tickangle:90},yaxis:{title:a.legend,rangemode:"tozero"},yaxis2:{title:r.legend,side:"right",overlaying:"y",rangemode:"tozero"},legend:{itemclick:!1,itemdoubleclick:!1},shapes:f.lines.concat(d)})}var $},[s,c,a,r,o,i]}class W extends G{constructor(t){super(),F(this,t,U,K,o,{LeftAxis:2,RightAxis:3,Observations:4,Treatments:5})}}function X(n){let e,a,r;return{c(){e=f("textarea")},m(t,o){u(t,e,o),g(e,n[0]),a||(r=p(e,"input",n[2]),a=!0)},p(t,[n]){1&n&&g(e,t[0])},i:t,o:t,d(t){t&&l(e),a=!1,r()}}}function Z(t,n,e){let{table:a=[]}=n;var r=a.map((function(t){return t.join(",")})).join("\n");return t.$$set=t=>{"table"in t&&e(1,a=t.table)},t.$$.update=()=>{if(1&t.$$.dirty){var n=r.trim().split("\n");e(1,a=n.map((function(t){return t.split(",")})))}},[r,a,function(){r=this.value,e(0,r)}]}class tt extends G{constructor(t){super(),F(this,t,Z,X,o,{table:1})}}function nt(t){let n,e,a,r,o,d,m,h,y;const x=t[4].default,b=function(t,n,e,a){if(t){const r=i(t,n,e,a);return t[0](r)}}(x,t,t[3],null);function v(n){t[6](n)}let w={};return void 0!==t[1]&&(w.table=t[1]),o=new tt({props:w}),k.push((()=>q(o,"table",v))),{c(){n=f("div"),e=f("input"),a=$(),b&&b.c(),r=$(),B(o.$$.fragment)},m(i,s){u(i,n,s),c(n,e),g(e,t[0]),c(n,a),b&&b.m(n,null),u(i,r,s),D(o,i,s),m=!0,h||(y=p(e,"input",t[5]),h=!0)},p(t,[n]){1&n&&e.value!==t[0]&&g(e,t[0]),b&&b.p&&8&n&&s(b,x,t,t[3],n,null,null);const a={};!d&&2&n&&(d=!0,a.table=t[1],L((()=>d=!1))),o.$set(a)},i(t){m||(N(b,t),N(o.$$.fragment,t),m=!0)},o(t){S(b,t),S(o.$$.fragment,t),m=!1},d(t){t&&l(n),b&&b.d(t),t&&l(r),V(o,t),h=!1,y()}}}function et(t,n,e){let{$$slots:a={},$$scope:r}=n,{name:o}=n,{data:i}=n,s=i.x.map((function(t,n){return[t,i.y[n]]}));return t.$$set=t=>{"name"in t&&e(0,o=t.name),"data"in t&&e(2,i=t.data),"$$scope"in t&&e(3,r=t.$$scope)},t.$$.update=()=>{if(2&t.$$.dirty){var n=function(t){var n={x:[],y:[]};return t.forEach((function(t){t.length>=2&&(n.x.push(t[0]),n.y.push(Number(t[1])))})),n}(s);e(2,i.x=n.x,i),e(2,i.y=n.y,i)}1&t.$$.dirty&&e(2,i.name=o,i)},[o,s,i,r,a,function(){o=this.value,e(0,o)},function(t){s=t,e(1,s)}]}class at extends G{constructor(t){super(),F(this,t,et,nt,o,{name:0,data:2})}}function rt(t,n,e){const a=t.slice();return a[10]=n[e],a[11]=n,a[12]=e,a}function ot(t){let n,e,a,r,o;return{c(){n=f("button"),e=d("-"),n.disabled=a=1==t[0].length},m(a,i){u(a,n,i),c(n,e),r||(o=p(n,"click",t[6]),r=!0)},p(t,e){1&e&&a!==(a=1==t[0].length)&&(n.disabled=a)},d(t){t&&l(n),r=!1,o()}}}function it(t,n){let e,a,r,o;function i(t){n[7](t,n[10],n[11],n[12])}let s={name:n[10].name,$$slots:{default:[ot]},$$scope:{ctx:n}};return void 0!==n[10]&&(s.data=n[10]),a=new at({props:s}),k.push((()=>q(a,"data",i))),{key:t,first:null,c(){e=d(""),B(a.$$.fragment),this.first=e},m(t,n){u(t,e,n),D(a,t,n),o=!0},p(t,e){n=t;const o={};1&e&&(o.name=n[10].name),8193&e&&(o.$$scope={dirty:e,ctx:n}),!r&&1&e&&(r=!0,o.data=n[10],L((()=>r=!1))),a.$set(o)},i(t){o||(N(a.$$.fragment,t),o=!0)},o(t){S(a.$$.fragment,t),o=!1},d(t){t&&l(e),V(a,t)}}}function st(t){let n,e,r,o,i,s,m,y,x,b,v,k,w=[],_=new Map,A=t[0].tables;const E=t=>t[10].id;for(let n=0;n<A.length;n+=1){let e=rt(t,A,n),a=E(e);_.set(a,w[n]=it(a,e))}return{c(){n=f("h2"),e=d(t[1]),r=$(),o=f("input"),i=$();for(let t=0;t<w.length;t+=1)w[t].c();s=$(),m=f("button"),m.textContent="+",y=$(),x=f("hr")},m(a,l){u(a,n,l),c(n,e),u(a,r,l),u(a,o,l),g(o,t[2]),u(a,i,l);for(let t=0;t<w.length;t+=1)w[t].m(a,l);u(a,s,l),u(a,m,l),u(a,y,l),u(a,x,l),b=!0,v||(k=[p(o,"input",t[5]),p(m,"click",t[3])],v=!0)},p(t,[n]){(!b||2&n)&&h(e,t[1]),4&n&&o.value!==t[2]&&g(o,t[2]),17&n&&(A=t[0].tables,C={r:0,c:[],p:C},w=function(t,n,e,a,r,o,i,s,c,u,l,f){let d=t.length,$=o.length,p=d;const m={};for(;p--;)m[t[p].key]=p;const h=[],g=new Map,y=new Map;for(p=$;p--;){const t=f(r,o,p),s=e(t);let c=i.get(s);c?a&&c.p(t,n):(c=u(s,t),c.c()),g.set(s,h[p]=c),s in m&&y.set(s,Math.abs(p-m[s]))}const x=new Set,b=new Set;function v(t){N(t,1),t.m(s,l),i.set(t.key,t),l=t.first,$--}for(;d&&$;){const n=h[$-1],e=t[d-1],a=n.key,r=e.key;n===e?(l=n.first,d--,$--):g.has(r)?!i.has(a)||x.has(a)?v(n):b.has(r)?d--:y.get(a)>y.get(r)?(b.add(a),v(n)):(x.add(r),d--):(c(e,i),d--)}for(;d--;){const n=t[d];g.has(n.key)||c(n,i)}for(;$;)v(h[$-1]);return h}(w,n,E,1,t,A,_,s.parentNode,z,it,s,rt),C.r||a(C.c),C=C.p)},i(t){if(!b){for(let t=0;t<A.length;t+=1)N(w[t]);b=!0}},o(t){for(let t=0;t<w.length;t+=1)S(w[t]);b=!1},d(t){t&&l(n),t&&l(r),t&&l(o),t&&l(i);for(let n=0;n<w.length;n+=1)w[n].d(t);t&&l(s),t&&l(m),t&&l(y),t&&l(x),v=!1,a(k)}}}function ct(t,n,e){let{data:a}=n,{name:r}=n,o=a.legend;var i=1;function s(t){return a.some((n=>n.name==t))?s(t+"'"):t}function c(t){a.tables.splice(t,1),e(0,a),e(2,o)}a.tables.forEach((t=>t.id=i++));return t.$$set=t=>{"data"in t&&e(0,a=t.data),"name"in t&&e(1,r=t.name)},t.$$.update=()=>{4&t.$$.dirty&&e(0,a.legend=o,a)},[a,r,o,function(){e(0,a=[...a,{x:[],y:[],name:s("new"),id:i++}])},c,function(){o=this.value,e(2,o)},()=>c(1),function(t,n,r,i){r[i]=t,e(0,a),e(2,o)}]}class ut extends G{constructor(t){super(),F(this,t,ct,st,o,{data:0,name:1})}}function lt(t){let n,e,a,r,o,i;function s(n){t[4](n)}let p={};return void 0!==t[1]&&(p.table=t[1]),r=new tt({props:p}),k.push((()=>q(r,"table",s))),{c(){n=f("h3"),e=d(t[0]),a=$(),B(r.$$.fragment)},m(t,o){u(t,n,o),c(n,e),u(t,a,o),D(r,t,o),i=!0},p(t,[n]){(!i||1&n)&&h(e,t[0]);const a={};!o&&2&n&&(o=!0,a.table=t[1],L((()=>o=!1))),r.$set(a)},i(t){i||(N(r.$$.fragment,t),i=!0)},o(t){S(r.$$.fragment,t),i=!1},d(t){t&&l(n),t&&l(a),V(r,t)}}}function ft(t,n,e){let{name:a}=n,{data:r}=n,{keys:o}=n,i=r.map((function(t){return o.map((function(n){return t[n]}))}));return t.$$set=t=>{"name"in t&&e(0,a=t.name),"data"in t&&e(2,r=t.data),"keys"in t&&e(3,o=t.keys)},t.$$.update=()=>{var n;2&t.$$.dirty&&e(2,(n=[],i.forEach((function(t){if(t.length==o.length){var e={};t.forEach((function(t,n){e[o[n]]=t})),n.push(e)}})),r=n))},[a,i,r,o,function(t){i=t,e(1,i)}]}class dt extends G{constructor(t){super(),F(this,t,ft,lt,o,{name:0,data:2,keys:3})}}function $t(t){let n,e,a,r,o,i,s,d,p,m,h,g,x,b,v,w,_;function A(n){t[4](n)}let E={name:"Left axis data"};function T(n){t[5](n)}void 0!==t[0]&&(E.data=t[0]),a=new ut({props:E}),k.push((()=>q(a,"data",A)));let O={name:"Right axis data"};function j(n){t[6](n)}void 0!==t[1]&&(O.data=t[1]),i=new ut({props:O}),k.push((()=>q(i,"data",T)));let M={name:"Observations",keys:["name","time"]};function R(n){t[7](n)}void 0!==t[2]&&(M.data=t[2]),p=new dt({props:M}),k.push((()=>q(p,"data",j)));let P={name:"Treatments",keys:["name","start","end"]};return void 0!==t[3]&&(P.data=t[3]),g=new dt({props:P}),k.push((()=>q(g,"data",R))),w=new W({props:{LeftAxis:t[0],RightAxis:t[1],Observations:t[2],Treatments:t[3]}}),{c(){n=f("div"),e=f("div"),B(a.$$.fragment),o=$(),B(i.$$.fragment),d=$(),B(p.$$.fragment),h=$(),B(g.$$.fragment),b=$(),v=f("div"),B(w.$$.fragment),y(e,"display","flex"),y(e,"flex-direction","column"),y(e,"flex","20%"),y(v,"flex","70%"),y(n,"display","flex")},m(t,r){u(t,n,r),c(n,e),D(a,e,null),c(e,o),D(i,e,null),c(e,d),D(p,e,null),c(e,h),D(g,e,null),c(n,b),c(n,v),D(w,v,null),_=!0},p(t,[n]){const e={};!r&&1&n&&(r=!0,e.data=t[0],L((()=>r=!1))),a.$set(e);const o={};!s&&2&n&&(s=!0,o.data=t[1],L((()=>s=!1))),i.$set(o);const c={};!m&&4&n&&(m=!0,c.data=t[2],L((()=>m=!1))),p.$set(c);const u={};!x&&8&n&&(x=!0,u.data=t[3],L((()=>x=!1))),g.$set(u);const l={};1&n&&(l.LeftAxis=t[0]),2&n&&(l.RightAxis=t[1]),4&n&&(l.Observations=t[2]),8&n&&(l.Treatments=t[3]),w.$set(l)},i(t){_||(N(a.$$.fragment,t),N(i.$$.fragment,t),N(p.$$.fragment,t),N(g.$$.fragment,t),N(w.$$.fragment,t),_=!0)},o(t){S(a.$$.fragment,t),S(i.$$.fragment,t),S(p.$$.fragment,t),S(g.$$.fragment,t),S(w.$$.fragment,t),_=!1},d(t){t&&l(n),V(a),V(i),V(p),V(g),V(w)}}}function pt(t,n,e){var a={legend:"Värde - ddPCR",tables:[{x:["2020-01-01","2020-01-15","2020-01-28"],y:[1,5,6],name:"ddPCR"}]},r={legend:"Värde - LD",tables:[{x:["2020-01-01","2020-01-15","2020-02-01"],y:[2,7,5],name:"LD"}]},o=[{name:"A",time:"2020-01-03"},{name:"B",time:"2020-01-18"}],i=[{name:"Taf",start:"2020-01-05",end:"2020-01-14"},{name:"Taf+Mek",start:"2020-01-14",end:"2020-01-20"},{name:"Taf",start:"2020-01-20",end:"2020-02-02"}];return[a,r,o,i,function(t){e(0,a=t)},function(t){e(1,r=t)},function(t){e(2,o=t)},function(t){e(3,i=t)}]}return new class extends G{constructor(t){super(),F(this,t,pt,$t,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
